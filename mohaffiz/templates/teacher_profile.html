{% extends 'base.html' %}
{% block content %}
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <style>
        body {
            background: #f7f7ff;
            margin-top: 20px;
        }

        .card {
            position: relative;
            display: flex;
            flex-direction: column;
            min-width: 0;
            word-wrap: break-word;
            background-color: #fff;
            background-clip: border-box;
            border: 0 solid transparent;
            border-radius: .25rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 6px 0 rgb(218 218 253 / 65%), 0 2px 6px 0 rgb(206 206 238 / 54%);
        }

        .me-2 {
            margin-right: .5rem!important;
        }
    </style>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css"
          integrity="sha384-nU14brUcp6StFntEOOEBvcJm4huWjB0OcIeQ3fltAfSmuZFrkAif0T+UtNGlKKQv" crossorigin="anonymous">
</head>
<body>
<div class="container">
    <div class="main-body">
        <div class="row">
            <div class="col-lg-4">
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex flex-column align-items-center text-center">
                            <img src="{{ teacher.image.url }}" alt="{{ teacher.full_name }}"
                                 class="rounded-circle p-1 bg-primary" width="110">
                            <div class="mt-3">
                                <h4>{{ teacher.full_name }}</h4>
                                <p class="text-secondary mb-1"><a href="{% url 'circle_detail' teacher.circle.id %}" style="color: black;">{{ teacher.circle }}</a></p>
                                <p class="text-muted font-size-sm">{{ teacher.address }}</p>
                                <button class="btn btn-outline-primary">رسالة</button>
                            </div>
                        </div>
                        <hr class="my-4">
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                <h6 class="mb-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    class="feather feather-globe me-2 icon-inline"><circle cx="12" cy="12"
                                                                                                        r="10"></circle><line
                                        x1="2" y1="12" x2="22" y2="12"></line><path
                                        d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>الموقع
                                </h6>
                                <span class="text-secondary">{{ teacher.website }}</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                <h6 class="mb-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    class="feather feather-github me-2 icon-inline"><path
                                        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>جيت هاب
                                </h6>
                                <span class="text-secondary">{{ teacher.github }}</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                <h6 class="mb-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    class="feather feather-twitter me-2 icon-inline text-info"><path
                                        d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 a 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg>تويتر
                                </h6>
                                <span class="text-secondary">{{ teacher.twitter }}</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                <h6 class="mb-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    class="feather feather-instagram me-2 icon-inline text-danger"><rect
                                        x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path
                                        d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5"
                                                                                                   x2="17.51" y2="6.5"></line></svg>إنستجرام
                                </h6>
                                <span class="text-secondary">{{ teacher.instagram }}</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                <h6 class="mb-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    class="feather feather-facebook me-2 icon-inline text-primary"><path
                                        d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg>فيسبوك
                                </h6>
                                <span class="text-secondary">{{ teacher.facebook }}</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-lg-8">
                <div class="card">
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-sm-3">
                                <h6 class="mb-0">الاسم الكامل</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                <input type="text" class="form-control" value="{{ teacher.full_name }}" readonly>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-3">
                                <h6 class="mb-0">رقم الهوية</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                <input type="text" class="form-control" value="{{ teacher.id_number }}" readonly>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-3">
                                <h6 class="mb-0">تاريخ الميلاد</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                <input type="text" class="form-control" value="{{ teacher.date_of_birth }}" readonly>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-3">
                                <h6 class="mb-0">الجوال</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                <input type="text" class="form-control" value="{{ teacher.personal_mobile }}" readonly>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-3">
                                <h6 class="mb-0">العنوان</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                <input type="text" class="form-control" value="{{ teacher.address }}" readonly>
                            </div>
                        </div>
						<div class="row mb-3">
                            <div class="col-sm-3">
                                <h6 class="mb-0">عدد أيام الغياب</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                <input type="text" class="form-control" value="{{ teacher.Monthly_absence }}" readonly>
                            </div>
                        </div>
                    </div>
                </div>
                <h5 class="text-center"> الطلاب</h5>

<table class="table table-bordered" style="text-align: center;">
    <thead>
        <tr>
            <th scope="col">اسم الطالب</th>
            <th scope="col">رقم الهوية</th>
            <th scope="col">تاريخ الميلاد</th>
            <th scope="col">الحفظ الحالي</th>
        </tr>
    </thead>
    <tbody>
        {% for student in teacher.students.all %}
        <tr>
            <td><a href="{% url 'student_profile' student.id %}" style="color: black;">{{ student.full_name }}</a></td>
            <td>{{ student.id_number }}</td>
            <td>{{ student.birth_date }}</td>
            <td>{{ student.current_hifz }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<!-- نهاية جدول الطلاب -->

<!-- إضافة فراغ بين الجدولين -->
<div style="margin-bottom: 20px;"></div>
<!-- عنوان شهادات المحفظ -->
<h5 class="text-center">شهادات المحفظ</h5>

<!-- جدول الشهادات -->
<table class="table table-bordered" style="text-align: center;">
    <thead>
        <tr>
            <th scope="col">عنوان الشهادة</th>
            <th scope="col">تاريخ الحصول على الشهادة</th>
            <th scope="col">نوع الشهادة</th>
            <th scope="col">وصف الشهادة</th>
            <th scope="col">صورة الشهادة</th>
        </tr>
    </thead>
    <tbody>
        {% for certificate in teacher.certificates.all %}
        <tr>
            <td>{{ certificate.title }}</td>
            <td>{{ certificate.issue_date }}</td>
            <td>{{ certificate.type }}</td>
            <td>{{ certificate.description }}</td>
            <td>
                <div class="certificate-thumbnail">
                    <img src="{{ certificate.image.url }}" alt="{{ certificate.title }}" class="certificate-image" onclick="toggleImageSize(this);">
                </div>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4">لا توجد شهادات متاحة حاليًا.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- إضافة الكود التالي لتكبير الصورة -->
<script>
    // تبديل حجم الصورة بين مصغرة ومكبرة
    function toggleImageSize(image) {
        image.classList.toggle("enlarged");
        if (image.classList.contains("enlarged")) {
            // إذا تم تكبير الصورة، قم بإضافة معالج النقر على الصفحة
            document.addEventListener("click", closeEnlargedImages);
        } else {
            // إذا تمت إعادة تصغير الصورة، قم بإزالة معالج النقر على الصفحة
            document.removeEventListener("click", closeEnlargedImages);
        }
    }

    // إعادة تصغير الصورة عند النقر على أي مكان آخر في الصفحة
    function closeEnlargedImages(event) {
        const enlargedImages = document.querySelectorAll(".enlarged");
        enlargedImages.forEach((image) => {
            if (!image.contains(event.target)) {
                image.classList.remove("enlarged");
            }
        });
        document.removeEventListener("click", closeEnlargedImages);
    }
</script>

<!-- إضافة الكود CSS لتنسيق الصور المصغرة والمكبرة -->
<style>
    .certificate-thumbnail {
        max-width: 100px;
        max-height: 100px;
        overflow: hidden;
        position: relative;
        
    }

    .certificate-image {
        max-width: 100%;
        max-height: 100%;
        cursor: pointer; /* إضافة مؤشر الفأرة للإشارة إلى أن الصورة قابلة للنقر */
    }

    .certificate-image.enlarged {
        max-width: none;
        max-height: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        margin: auto;
        background-color: rgba(0, 0, 0, 0.9);
        z-index: 9999;
        cursor: zoom-out; /* إعادة تعيين المؤشر عند تكبير الصورة */
    }

    
</style>
<!-- نهاية جدول الشهادات -->
                                <!-- نهاية جدول الطلاب -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Option 1: Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

</body>
</html>

{% endblock content %}